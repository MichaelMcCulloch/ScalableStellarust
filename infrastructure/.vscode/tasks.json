{
	"version": "2.0.0",
	"tasks": [
		{
			"type": "shell",
			"command": "vagrant up --parallel",
			"group": "build",
			"label": "Infrastructure::Vagrant::Spawn"
		},
		{
			"type": "shell",
			"command": "vagrant halt",
			"group": "build",
			"label": "Infrastructure::Vagrant::Halt"
		},
		{
			"type": "shell",
			"command": "vagrant up --parallel --provision",
			"group": "build",
			"label": "Infrastructure::Vagrant::Provision"
		},
		{
			"type": "shell",
			"command": "vagrant destroy --parallel",
			"group": "build",
			"label": "Infrastructure::Vagrant::Destroy"
		},
		{
			"group": "build",
			"label": "Infrastructure::Vagrant::Redeploy",
			"dependsOrder": "sequence",
			"dependsOn": [
				"Infrastructure::Vagrant::Destroy",
				"Infrastructure::Vagrant::Spawn",
				"Infrastructure::Ansible::VirtualMachines::DeployDatacenter"
			]
		},
		{
			"type": "shell",
			"command": [
				"ansible-playbook",
				"-i",
				"../.vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory",
				"-i",
				"inventories/inv.ini",
				"deploy_datacenter.yml",
				"-e 'ansible_user=root'",
				"-e 'ansible_ssh_private_key_file=~/.ssh/id_rsa'",
				"-u root",
			],
			"options": {
				"cwd": "${workspaceFolder}/ansible",
				"env": {
					"ANSIBLE_STDOUT_CALLBACK": "debug"
				}
			},
			"group": "build",
			"label": "Infrastructure::Ansible::VirtualMachines::DeployDatacenter"
		},
		{
			"type": "shell",
			"command": [
				"ansible-playbook",
				"-i",
				"inventories/inv.ini",
				"teardown_datacenter.yml",
				"-u root",
			],
			"options": {
				"cwd": "${workspaceFolder}/ansible",
				"env": {
					"ANSIBLE_STDOUT_CALLBACK": "debug"
				}
			},
			"group": "build",
			"label": "Infrastructure::Ansible::VirtualMachines::TeardownDatacenter"
		},
		{
			"type": "shell",
			"command": [
				"ansible-inventory",
				"-i",
				"inventories/containers/",
				"--list",
			],
			"options": {
				"cwd": "${workspaceFolder}/ansible",
				"env": {
					"ANSIBLE_STDOUT_CALLBACK": "debug",
					"SECURE_KEYS": "${workspaceFolder}/secure_keys"
				}
			},
			"group": "build",
			"label": "Infrastructure::Ansible::DockerContainers::ListContainers"
		}
	]
}