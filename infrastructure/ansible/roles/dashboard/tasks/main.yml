---
- name: intall helm-diff
  shell: helm plugin install https://github.com/databus23/helm-diff
  register: installDiffPlugin
  failed_when:
    - '"Installed plugin: diff" not in installDiffPlugin.stdout'
    - '"Error: plugin already exists" not in installDiffPlugin.stderr'

- name: Add a repository
  shell: helm repo add kubernetes-dashboard https://kubernetes.github.io/dashboard/

- name: Install Kubernetes Dashboard
  register: installDashChart
  shell: helm install star-dash kubernetes-dashboard/kubernetes-dashboard
  failed_when:
    - '"Error: INSTALLATION FAILED: cannot re-use a name that is still in use" not in installDashChart.stderr'
    - '"Get the Kubernetes Dashboard URL by running:" not in installDashChart.stdout'
